<div class="icws-request-viewer">
  <link rel="stylesheet" href="style/icws-request-viewer.css">
  <link rel="stylesheet" href="vendor/style/json-formatter.css">

  <h1>Request</h1>
  <label>View Raw JSON<input type="checkbox" ng-model="viewRawJsonRequest"/></label>
  <div
    class="formatted-json"
    ng-if="viewRawJsonRequest">
    <button ng-click="copyRequest()">Copy JSON</button>
    <textarea
      id="rawJsonRequest"
      rows="25"
      style="width:95%;">{{ stringifiedRequest }}</textarea>
  </div>
  <table class="request-grid" ng-if="!viewRawJsonRequest">
    <tbody>
      <tr>
        <th>Verb</th>
        <td>{{ request.verb }}</td>
      </tr>
      <tr>
        <th>URL</th>
        <td>{{ request.shortUrl }}</td>
      </tr>
      <tr>
        <th>Timeout (ms)</th>
        <td>{{ request.timeout }}</td>
      </tr>
      <tr>
        <th>URL Template Parameters</th>
        <td><json-formatter json="request.params.template" open="1" ng-class="{ 'json-formatter-dark': dark }"></json-formatter></td>
      </tr>
      <tr>
        <th>Header Parameters</th>
        <td><json-formatter json="request.params.header" open="1" ng-class="{ 'json-formatter-dark': dark }"></json-formatter></td>
      </tr>
      <tr>
        <th>Query String Parameters</th>
        <td><json-formatter json="request.params.query" open="1" ng-class="{ 'json-formatter-dark': dark }"></json-formatter></td>
      </tr>
      <tr ng-show="request.params.content">
        <th>Body</th>
        <td><json-formatter json="request.params.content" open="1" ng-class="{ 'json-formatter-dark': dark }"></json-formatter></td>
      </tr>
      <tr>
        <th>Requested at</th>
        <td>{{ request.requestTimestamp | date:'HH:mm:ss.sss' }}</td>
      </tr>
      <tr>
        <th>Header Size</th>
        <td>{{ request.requestSize.headers }}</td>
      </tr>
      <tr>
        <th>Body Size</th>
        <td>{{ request.requestSize.body }}</td>
      </tr>
    </tbody>
  </table>

  <h1 ng-show="request.responseTimestamp">Response</h1>
  <label>View Raw JSON<input type="checkbox" ng-model="viewRawJsonResponse"/></label>
  <div
    class="formatted-json"
    ng-if="viewRawJsonResponse">
    <button ng-click="copyResponse()">Copy JSON</button>
    <textarea
      id="rawJsonResponse"
      rows="25"
      style="width:95%;">{{ stringifiedResponse }}</textarea>
  </div>
  <table ng-show="request.responseTimestamp" ng-if="!viewRawJsonResponse" class="response-grid">
    <tbody>
      <tr>
        <th>Status Code</th>
        <td>{{ request.status }}</td>
      </tr>
      <tr ng-show="request.responseContent">
        <th>Body</th>
        <td><json-formatter json="request.responseContent" open="1" ng-class="{ 'json-formatter-dark': dark }"></json-formatter></td>
      </tr>
      <tr>
        <th>Responded at</th>
        <td>{{ request.responseTimestamp | date:'HH:mm:ss.sss' }}</td>
      </tr>
      <tr>
        <th>Duration (ms)</th>
        <td>{{ request.duration }}</td>
      </tr>
      <tr>
        <th>Result</th>
        <td>{{ request.result }}</td>
      </tr>
      <tr>
        <th>Header Size</th>
        <td>{{ request.responseSize.headers }}</td>
      </tr>
      <tr>
        <th>Body Size</th>
        <td>{{ request.responseSize.body }}</td>
      </tr>
    </tbody>
  </table>

  <h1>Details</h1>
  <table class="details-grid">
    <tbody>
      <tr>
        <th>Template URL</th>
        <td>{{ request.urlTemplate }}</td>
      </tr>
      <tr>
        <th>More Information</th>
        <td><icws-doc-link entry="entry">Read the doc</icws-doc-link></td>
      </tr>
    </tbody>
  </table>
</div>
